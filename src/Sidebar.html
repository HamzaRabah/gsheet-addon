<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,500,700,400italic|Material+Icons">
    <link rel="stylesheet" href="https://unpkg.com/vue-material/dist/vue-material.min.css">
    <link rel="stylesheet" href="https://unpkg.com/vue-material/dist/theme/default.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/intercom.js/0.1.4/intercom.min.js"></script>

    <?!= include('SidebarStylesheet'); ?>
</head>
<body>
    <div id="app">
      <div v-if="isSignedIn">
        <div class="row">
          <md-field>
            <label for="property">Property</label>
            <md-select v-model="selectedProperty" name="property" id="property">
                <md-option
                  v-for="property in properties"
                  :value="property.code"
                >{{ property.name }}</md-option>
            </md-select>
          </md-field>
        </div>
        <div class="row">
          <md-datepicker v-model="arrivalDate" md-immediately>
            <label>Arrival</label>
          </md-datepicker>
        </div>
        <div class="row">
          <md-datepicker v-model="departureDate" md-immediately>
            <label>Departure</label>
          </md-datepicker>
        </div>
        <div class="row">
          <md-button class="md-raised primary" @click="submit">
            <md-icon>whatshot</md-icon>
            Generate
          </md-button>
          <md-button @click="signOut">
            Sign out
          </md-button>
        </div>
      </div>
      <div v-if="!isSignedIn">
        <p>Please sign in to your Apaleo account to continue.</p>
        <md-button class="md-raised" @click="signIn">
          Sign in
        </md-button>
      </div>

      <div v-if="inProgress" id="loadingPanel" class="loading-panel">
        <div class="spinner"></div>
        <label>Loading...</label>
      </div>
    </div>

    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/vue-material"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@1.26.0/build/global/luxon.min.js"></script>

    <script>
      const apaleoContext = {
        isCustomApp: '<?= isCustomApp ?>' == 'true',
        isSignedIn: '<?= isSignedIn ?>' == 'true'
      };
    </script>
    <?!= include('SidebarScript'); ?>
</body>
</html>
